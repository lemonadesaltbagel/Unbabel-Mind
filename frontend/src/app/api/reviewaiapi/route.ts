import{NextRequest,NextResponse}from'next/server';import{getBackendUrl}from'@/utils/config';
export async function POST(req:NextRequest){try{const{prompt}=await req.json();if(!prompt)return NextResponse.json({error:'Prompt is required'},{status:400});const authHeader=req.headers.get('authorization');if(!authHeader)return NextResponse.json({error:'Authorization header required'},{status:401});const backendUrl=getBackendUrl();const r=await fetch(`${backendUrl}/api/reviewaiapi`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':authHeader},body:JSON.stringify({prompt})});if(!r.ok){const et=await r.text();console.error('Backend API error:',r.status,et);return NextResponse.json({error:`Backend API error: ${r.status}`},{status:r.status});}const d=await r.json();return NextResponse.json(d);}catch(e){console.error('Proxy error:',e);return NextResponse.json({error:'Internal Server Error'},{status:500});}}
