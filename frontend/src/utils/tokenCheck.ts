export const checkTokenAndWarn=async()=>{try{const r=await fetch('/api/profile/configs');if(r.ok){const d=await r.json();if(!d.openaiToken||d.openaiToken.length===0){showTokenWarning();return false;}}else{return true;}}catch{showTokenWarning();return false;}return true;};
export const showTokenWarning=()=>{const modal=document.createElement('div');modal.className='fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';modal.innerHTML=`<div class="bg-white rounded-lg p-6 max-w-md mx-4 text-center"><h3 class="text-lg font-semibold mb-4 text-gray-800">OpenAI API Token Required</h3><p class="text-gray-600 mb-4">To use AI features, you need to configure your OpenAI API token in your profile settings.</p><div class="flex space-x-3"><button id="setup-token" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Setup Token</button><button id="close-modal" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">Close</button></div></div>`;document.body.appendChild(modal);modal.querySelector('#setup-token')?.addEventListener('click',()=>{window.location.href='/profile';modal.remove();});modal.querySelector('#close-modal')?.addEventListener('click',()=>modal.remove());modal.addEventListener('click',(e)=>{if(e.target===modal)modal.remove();});};
