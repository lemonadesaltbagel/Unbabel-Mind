'use client';
import {useRouter} from 'next/navigation';
import {useState,useEffect} from 'react';
type Props={title:string};
export default function ListeningTranscript({title}:Props){const r=useRouter();const[isPlaying,setIsPlaying]=useState(false);const[currentTime,setCurrentTime]=useState(0);const duration=135;const[progress,setProgress]=useState(0);const formatTime=(s:number)=>{const m=Math.floor(s/60);const sec=s%60;return`${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;};const handlePlay=()=>{setIsPlaying(!isPlaying);};const handlePrevious=()=>{setCurrentTime(Math.max(0,currentTime-5));};const handleNext=()=>{setCurrentTime(Math.min(duration,currentTime+5));};useEffect(()=>{if(isPlaying){const interval=setInterval(()=>{setCurrentTime(prev=>{if(prev>=duration){setIsPlaying(false);return duration;}return prev+1;});},1000);return()=>clearInterval(interval);}},[isPlaying,duration]);useEffect(()=>{setProgress((currentTime/duration)*100);},[currentTime,duration]);return(<div className="absolute top-4 left-4 right-4 z-50 bg-white p-6 rounded-xl shadow-lg w-auto h-[20vh] overflow-y-auto border-2 border-blue-200"><div className="flex justify-between items-start h-full"><div className="flex-shrink-0"><h2 className="text-xl font-bold mb-2">Listening Section</h2><h3 className="text-md font-semibold mb-4">{title}</h3></div><div className="bg-gray-100 p-4 rounded-lg ml-4 flex-1"><div className="text-center text-gray-600 mb-2">🎧 Audio Player</div><div className="flex items-center justify-center space-x-4 mb-4"><button onClick={handlePrevious} className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">⏮️ Previous</button><button onClick={handlePlay} className={`${isPlaying?'bg-yellow-500 hover:bg-yellow-600':'bg-green-500 hover:bg-green-600'} text-white px-6 py-2 rounded-lg transition-colors`}>{isPlaying?'⏸️ Pause':'▶️ Play'}</button><button onClick={handleNext} className="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">⏭️ Next</button></div><div className="w-80 bg-gray-200 rounded-full h-2 mb-2"><div className="bg-blue-500 h-2 rounded-full transition-all duration-300" style={{width:`${progress}%`}}></div></div><div className="text-center text-xs text-gray-500">{formatTime(currentTime)} / {formatTime(duration)}</div></div><button onClick={()=>r.push('/dashboard')} className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors ml-4">🚪 Leave</button></div></div>);} 